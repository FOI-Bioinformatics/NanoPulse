/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    nf-test configuration for NanoPulse test data
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Defines paths to all test data files for nf-test unit tests
----------------------------------------------------------------------------------------
*/

params {
    // nf-core test data path for nf-core modules
    modules_testdata_base_path = 'https://raw.githubusercontent.com/nf-core/test-datasets/modules/data/'

    test_data {
        // Nanopore test data
        nanopore {
            reads {
                // Full test dataset (5000 reads, 6.8MB compressed)
                mock_5000        = "${projectDir}/tests/testdata/nanopore/reads/mock_5000.fastq.gz"

                // Small synthetic cluster files for unit tests
                cluster_0_fastq  = "${projectDir}/tests/testdata/nanopore/reads/cluster_0.fastq"
                cluster_1_fastq  = "${projectDir}/tests/testdata/nanopore/reads/cluster_1.fastq"
                cluster_fastq    = "${projectDir}/tests/testdata/nanopore/reads/reads_50.fastq"

                // Intermediate files for assembly/polishing tests
                corrected_fasta  = "${projectDir}/tests/testdata/nanopore/reads/corrected.fasta"
                draft_fasta      = "${projectDir}/tests/testdata/nanopore/reads/draft.fasta"
                polished_fasta   = "${projectDir}/tests/testdata/nanopore/reads/polished.fasta"
            }
            consensus {
                consensus_fasta      = "${projectDir}/tests/testdata/nanopore/consensus/consensus.fasta"
                multi_consensus      = "${projectDir}/tests/testdata/nanopore/consensus/multi_consensus.fasta"
                cluster_0_consensus  = "${projectDir}/tests/testdata/nanopore/consensus/cluster_0_consensus.fasta"
                cluster_1_consensus  = "${projectDir}/tests/testdata/nanopore/consensus/cluster_1_consensus.fasta"
                cluster_2_consensus  = "${projectDir}/tests/testdata/nanopore/consensus/cluster_2_consensus.fasta"
                annotations_tsv      = "${projectDir}/tests/testdata/nanopore/consensus/consensus_annotations.tsv"
                abundances_csv       = "${projectDir}/tests/testdata/nanopore/consensus/abundances.csv"
            }

            // Intermediate analysis files
            analysis {
                // TSV k-mer frequencies (legacy format)
                kmer_freqs       = "${projectDir}/tests/testdata/nanopore/reads/kmer_freqs.txt"

                // NPZ sparse matrix k-mer frequencies (Phase 2 optimization)
                kmer_freqs_npz   = "${projectDir}/tests/testdata/nanopore/analysis/kmer_freqs.npz"
                kmer_freqs_meta  = "${projectDir}/tests/testdata/nanopore/analysis/kmer_freqs_metadata.npz"

                // Dimensionality reduction outputs
                umap_coords      = "${projectDir}/tests/testdata/nanopore/reads/umap_coords.tsv"

                // Clustering outputs
                clusters_tsv     = "${projectDir}/tests/testdata/nanopore/reads/clusters.tsv"
                clusters_small   = "${projectDir}/tests/testdata/nanopore/reads/clusters_small.tsv"
                cluster_stats    = "${projectDir}/tests/testdata/nanopore/reads/cluster_stats.json"
            }
        }

        // Classification test data
        classification {
            kraken2_report       = "${projectDir}/tests/testdata/classification/kraken2_report.txt"
            blast_results        = "${projectDir}/tests/testdata/classification/blast_results.csv"
            fastani_results      = "${projectDir}/tests/testdata/classification/fastani_results.txt"
            classification_json  = "${projectDir}/tests/testdata/classification/classification.json"
            classification_cluster0 = "${projectDir}/tests/testdata/classification/classification_cluster0.json"
            classification_cluster1 = "${projectDir}/tests/testdata/classification/classification_cluster1.json"
        }

        // Phase 11 novelty detection test data
        phase11 {
            consensus_5clusters                  = "${projectDir}/tests/testdata/phase11/extract_novel/consensus_5clusters.fasta"
            consensus_1cluster                   = "${projectDir}/tests/testdata/phase11/extract_novel/consensus_1cluster.fasta"
            classification_probabilistic_mixed   = "${projectDir}/tests/testdata/phase11/extract_novel/classification_probabilistic_mixed.json"
            classification_all_high_confidence   = "${projectDir}/tests/testdata/phase11/extract_novel/classification_all_high_confidence.json"
            classification_all_novel             = "${projectDir}/tests/testdata/phase11/extract_novel/classification_all_novel.json"
            classification_single_cluster        = "${projectDir}/tests/testdata/phase11/extract_novel/classification_single_cluster.json"

            // Aggregate classifications test data
            classification_cluster0              = "${projectDir}/tests/testdata/phase11/aggregate/classification_cluster0.json"
            classification_cluster1              = "${projectDir}/tests/testdata/phase11/aggregate/classification_cluster1.json"
            classification_cluster2              = "${projectDir}/tests/testdata/phase11/aggregate/classification_cluster2.json"
            malformed_json                       = "${projectDir}/tests/testdata/phase11/aggregate/malformed.json"

            // Phylogenetic tree test data
            consensus_2seqs                      = "${projectDir}/tests/testdata/phase11/phylotree/consensus_2seqs.fasta"

            // Phyloseq object creation test data
            phyloseq_tree                        = "${projectDir}/tests/testdata/phase11/phyloseq/test_3clusters.tree"
        }

        // Mock databases for classification tests
        databases {
            blast_mini       = "${projectDir}/tests/testdata/databases/blast_mini/test_16s"
            kraken2_mini     = "${projectDir}/tests/testdata/databases/kraken2_mini"
            references_dir   = "${projectDir}/tests/testdata/databases/references"
        }

        // Reference genomes (alias for FASTANI tests)
        reference {
            genomes_dir      = "${projectDir}/tests/testdata/databases/references"
        }

        // Expected outputs for validation
        expected {
            kmer_freq        = "${projectDir}/tests/testdata/expected/kmer_freq.txt"
            umap_vectors     = "${projectDir}/tests/testdata/expected/umap_vectors.txt"
            clusters         = "${projectDir}/tests/testdata/expected/clusters.txt"
        }
    }
}
