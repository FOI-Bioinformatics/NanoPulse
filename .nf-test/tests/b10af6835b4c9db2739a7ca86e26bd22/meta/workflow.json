{"success":false,"exitStatus":127,"errorMessage":"INFO: Running fastANI on 203 reads\n/Users/andreassjodin/Code/NanoPulse/.nf-test/tests/b10af6835b4c9db2739a7ca86e26bd22/work/b2/0f03d5c96900c35d021669517a41a2/.command.sh: line 39: fastANI: command not found","errorReport":"Error executing process > 'DRAFT_SELECTION (test)'\n\nCaused by:\n  Process `DRAFT_SELECTION (test)` terminated with an error exit status (127)\n\n\nCommand executed:\n\n  # Split corrected reads into individual files (one read per file)\n     split -l 2 corrected.fasta split_reads_\n  \n     # Create list of read files\n     find . -name \"split_reads_*\" -type f > read_list.txt\n  \n     # Count reads\n     N_READS=$(wc -l < read_list.txt)\n  \n     if [ $N_READS -eq 0 ]; then\n         echo \"ERROR: No reads found in corrected reads file\" >&2\n         exit 1\n     elif [ $N_READS -eq 1 ]; then\n         # Only one read - use it as draft\n         echo \"INFO: Only 1 read available, using it as draft\" >&2\n         DRAFT_FILE=$(head -n1 read_list.txt)\n         cat $DRAFT_FILE > test_cluster0_draft.fasta\n         DRAFT_ID=$(head -n1 test_cluster0_draft.fasta | sed 's/>//g')\n  \n         # Create empty ANI results (no comparison needed)\n         echo -e \"query\\treference\\tANI\\tmatches\\ttotal_frags\" > test_cluster0.ani.tsv\n  \n         # Statistics\n         cat <<-EOF > test_cluster0.selection.json\n  {\n    \"n_reads\": 1,\n    \"draft_id\": \"$DRAFT_ID\",\n    \"avg_ani\": null,\n    \"selection_method\": \"single_read\",\n    \"cluster_id\": \"0\"\n  }\n  EOF\n     else\n         # Multiple reads - run fastANI all-vs-all\n         echo \"INFO: Running fastANI on $N_READS reads\" >&2\n  \n         fastANI \\\n             --ql read_list.txt \\\n             --rl read_list.txt \\\n             -o test_cluster0.ani.tsv \\\n             -t 2 \\\n             -k 16 \\\n             --fragLen 160 \\\n  \n  \n         # Calculate average ANI for each read\n         # Format: query ref ANI matches total\n         # For each read, calculate average ANI to all other reads\n         DRAFT_FILE=$(awk 'NR>1 {\n             name[$1] = $1\n             arr[$1] += $3\n             count[$1] += 1\n         }\n         END {\n             for (a in arr) {\n                 print arr[a] / count[a], name[a]\n             }\n         }' test_cluster0.ani.tsv | sort -rg | head -n1 | cut -d \" \" -f2)\n  \n         # Extract draft read\n         cat $DRAFT_FILE > test_cluster0_draft.fasta\n         DRAFT_ID=$(head -n1 test_cluster0_draft.fasta | sed 's/>//g')\n  \n         # Get average ANI for the selected draft\n         AVG_ANI=$(awk -v draft=\"$DRAFT_FILE\" 'NR>1 {\n             if ($1 == draft) {\n                 arr[$1] += $3\n                 count[$1] += 1\n             }\n         }\n         END {\n             for (a in arr) {\n                 print arr[a] / count[a]\n             }\n         }' test_cluster0.ani.tsv)\n  \n         # Statistics\n         cat <<-EOF > test_cluster0.selection.json\n  {\n    \"n_reads\": $N_READS,\n    \"draft_id\": \"$DRAFT_ID\",\n    \"avg_ani\": $AVG_ANI,\n    \"selection_method\": \"fastani_max_avg\",\n    \"cluster_id\": \"0\"\n  }\n  EOF\n  \n         echo \"\u2713 Selected draft: $DRAFT_ID (avg ANI: $AVG_ANI)\" >&2\n     fi\n  \n     # Version tracking\n     cat <<-END_VERSIONS > versions.yml\n     \"DRAFT_SELECTION\":\n         fastani: $(fastANI --version 2>&1 | grep -oP '(?<=version )\\S+' || echo \"1.33\")\n     END_VERSIONS\n\nCommand exit status:\n  127\n\nCommand output:\n  (empty)\n\nCommand error:\n  INFO: Running fastANI on 203 reads\n  .command.sh: line 39: fastANI: command not found\n\nWork dir:\n  /Users/andreassjodin/Code/NanoPulse/.nf-test/tests/b10af6835b4c9db2739a7ca86e26bd22/work/b2/0f03d5c96900c35d021669517a41a2\n\nTip: when you have fixed the problem you can continue the execution adding the option `-resume` to the run command line"}