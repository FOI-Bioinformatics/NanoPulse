{"success":false,"exitStatus":127,"errorMessage":"Starting iterative polishing with 4 rounds\nInitial draft: /Users/andreassjodin/Code/NanoPulse/tests/testdata/nanopore/reads/draft.fasta\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\nRound 1/4\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n  [1/2] Running minimap2 alignment...","errorReport":"Error executing process > 'RACON_ITERATIVE (test)'\n\nCaused by:\n  Process `RACON_ITERATIVE (test)` terminated with an error exit status (127)\n\n\nCommand executed:\n\n  #!/bin/bash\n     set -e\n  \n     # Track polishing statistics\n     declare -a round_status\n     declare -a round_sizes\n     total_success=0\n     total_failed=0\n  \n     # Start with the draft read\n     current_draft=$(realpath draft.fasta)\n     echo \"Starting iterative polishing with 4 rounds\" >&2\n     echo \"Initial draft: ${current_draft}\" >&2\n  \n     # Iterative polishing loop\n     for round in $(seq 1 4); do\n         echo \"\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\" >&2\n         echo \"Round ${round}/4\" >&2\n         echo \"\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\" >&2\n  \n         # Alignment with minimap2\n         echo \"  [1/2] Running minimap2 alignment...\" >&2\n         minimap2 \\\n             -ax map-ont \\\n             --no-long-join \\\n             -r100 \\\n             -t 2 \\\n             ${current_draft} \\\n             corrected.fasta \\\n             > round_${round}.sam 2> round_${round}_minimap2.log\n  \n         # Count alignments\n         n_alignments=$(samtools view -c -F 4 round_${round}.sam || echo \"0\")\n         echo \"  Alignments: ${n_alignments}\" >&2\n  \n         # Polishing with racon\n         echo \"  [2/2] Running racon polishing...\" >&2\n         set +e\n         racon \\\n             --quality-threshold 9 \\\n             -w 250 \\\n             -t 2 \\\n             -m 8 -x -6 -g -8 -w 500 \\\n             corrected.fasta \\\n             round_${round}.sam \\\n             ${current_draft} \\\n             > round_${round}_polished.fasta 2> round_${round}_racon.log\n         racon_exit=$?\n         set -e\n  \n         # Check if racon succeeded\n         if [ $racon_exit -eq 0 ] && [ -s round_${round}_polished.fasta ]; then\n             echo \"  \u2713 Racon polishing succeeded\" >&2\n             current_draft=$(realpath round_${round}_polished.fasta)\n             round_status[${round}]=\"success\"\n             total_success=$((total_success + 1))\n  \n             # Get sequence length\n             seq_len=$(awk '/^>/ {next} {total += length($0)} END {print total}' round_${round}_polished.fasta)\n             round_sizes[${round}]=${seq_len}\n             echo \"  Polished sequence length: ${seq_len} bp\" >&2\n         else\n             echo \"  \u2717 Racon polishing failed (exit code: $racon_exit)\" >&2\n             echo \"  Using previous draft for this round\" >&2\n             cp ${current_draft} round_${round}_polished.fasta\n             round_status[${round}]=\"failed\"\n             total_failed=$((total_failed + 1))\n  \n             # Get sequence length from previous draft\n             seq_len=$(awk '/^>/ {next} {total += length($0)} END {print total}' round_${round}_polished.fasta)\n             round_sizes[${round}]=${seq_len}\n         fi\n  \n         # Clean up SAM file to save space\n         rm -f round_${round}.sam\n     done\n  \n     # Final polished consensus\n     cp ${current_draft} test_cluster0_polished.fasta\n     final_length=$(awk '/^>/ {next} {total += length($0)} END {print total}' test_cluster0_polished.fasta)\n  \n     echo \"\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\" >&2\n     echo \"Polishing complete!\" >&2\n     echo \"  Successful rounds: ${total_success}/4\" >&2\n     echo \"  Failed rounds: ${total_failed}/4\" >&2\n     echo \"  Final length: ${final_length} bp\" >&2\n     echo \"\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\" >&2\n  \n     # Generate statistics JSON\n     cat <<-EOF > test_cluster0.stats.json\n  {\n    \"cluster_id\": \"0\",\n    \"rounds\": 4,\n    \"successful_rounds\": ${total_success},\n    \"failed_rounds\": ${total_failed},\n    \"final_length\": ${final_length},\n    \"round_status\": [\n     EOF\n  \n     # Add round status array\n     for round in $(seq 1 4); do\n         if [ ${round} -lt 4 ]; then\n             echo \"\t    {\"round\": ${round}, \"status\": \"${round_status[${round}]}\", \"length\": ${round_sizes[${round}]}},\" >> test_cluster0.stats.json\n         else\n             echo \"\t    {\"round\": ${round}, \"status\": \"${round_status[${round}]}\", \"length\": ${round_sizes[${round}]}}\" >> test_cluster0.stats.json\n         fi\n     done\n  \n     cat <<-EOF >> test_cluster0.stats.json\n    ]\n  }\n  EOF\n  \n     # Version tracking\n     cat <<-END_VERSIONS > versions.yml\n     \"RACON_ITERATIVE\":\n         racon: $(racon --version 2>&1 | grep -oP '(?<=v)\\S+' || echo \"1.5.0\")\n         minimap2: $(minimap2 --version 2>&1 || echo \"2.24\")\n         samtools: $(samtools --version 2>&1 | grep samtools | sed 's/samtools //g')\n     END_VERSIONS\n\nCommand exit status:\n  127\n\nCommand output:\n  (empty)\n\nCommand error:\n  Starting iterative polishing with 4 rounds\n  Initial draft: /Users/andreassjodin/Code/NanoPulse/tests/testdata/nanopore/reads/draft.fasta\n  \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n  Round 1/4\n  \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n    [1/2] Running minimap2 alignment...\n\nWork dir:\n  /Users/andreassjodin/Code/NanoPulse/.nf-test/tests/612a286179120a9a37bbb0dde49750b6/work/47/ce76a2e8e38528ca1c434ea05941b9\n\nTip: you can try to figure out what's wrong by changing to the process work dir and showing the script file named `.command.sh`"}